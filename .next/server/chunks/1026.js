exports.id=1026,exports.ids=[1026],exports.modules={13376:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/app/app/ui/dashboard/layout.js\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/app/app/ui/dashboard/layout.js","default")},21092:(e,t,r)=>{"use strict";r.d(t,{D:()=>n,N:()=>i});var s=r(60687),a=r(43210);let l=(0,a.createContext)();function i({children:e}){let[t,r]=(0,a.useState)("dark"),[i,n]=(0,a.useState)(!1);return i?(0,s.jsx)(l.Provider,{value:{theme:t,toggleTheme:()=>{r("dark"===t?"light":"dark")}},children:e}):null}function n(){let e=(0,a.useContext)(l);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},26592:(e,t,r)=>{"use strict";r.d(t,{J:()=>n,v:()=>i});var s=r(60687),a=r(43210);let l=(0,a.createContext)();function i({children:e}){let[t,r]=(0,a.useState)(null),[i,n]=(0,a.useState)("VISITOR"),[o,d]=(0,a.useState)(!0);return(0,s.jsx)(l.Provider,{value:{user:t,userRole:i,setUser:r,setUserRole:n,refreshBadge:()=>{d(!1),setTimeout(()=>{d(!0)},100)}},children:e})}function n(){return(0,a.useContext)(l)}},32648:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d,metadata:()=>o});var s=r(37413),a=r(81795),l=r.n(a),i=r(99767),n=r.n(i);r(82704),r(4536);let o={title:"FlyNext - Your Travel Companion",description:"Book flights, manage your trips, and explore the world with FlyNext"};function d({children:e}){return(0,s.jsx)("html",{lang:"en",children:(0,s.jsx)("body",{className:`${l().variable} ${n().variable} antialiased min-h-screen flex flex-col`,children:(0,s.jsx)("main",{className:"flex-grow",children:e})})})}},32730:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var s=r(60687),a=r(43210),l=r(62844),i=r(16189),n=r(21092);let o=(e,t)=>{let r;return(...s)=>{clearTimeout(r),r=setTimeout(()=>e(...s),t)}};function d(){let e=(0,i.useRouter)(),{theme:t}=(0,n.D)(),[r,d]=(0,a.useState)(0),[h,c]=(0,a.useState)(!0),[u,x]=(0,a.useState)(null),g=(0,a.useCallback)(async()=>{try{c(!0);let t=await (0,l.v$)("/api/user/notifications/badge");if(!t.ok){if(440===t.status){e.push("/ui/error/session-expired");return}throw Error("Failed to fetch unread notifications count")}let r=await t.json();d(r.unreadCount||0),x(null)}catch(e){console.error("Error fetching unread notifications count:",e),x(e.message)}finally{c(!1)}},[e]);return(0,a.useCallback)(()=>o(g,1e3)(),[g]),(0,s.jsx)("div",{className:"relative",children:(0,s.jsxs)("div",{title:"Notifications",className:`p-2 rounded-full transition-colors ${"dark"===t?"hover:bg-gray-700 text-gray-200":"hover:bg-gray-200 text-gray-600"}`,children:[(0,s.jsx)("svg",{className:`w-5 h-5 ${"dark"===t?"text-white":"text-gray-800"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),!h&&!u&&r>0&&(0,s.jsx)("span",{className:"absolute -top-1 -right-1 flex items-center justify-center w-5 h-5 text-xs font-bold text-white bg-red-500 rounded-full animate-pulse",children:r})]})})}},32737:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,85814,23))},32818:(e,t,r)=>{Promise.resolve().then(r.bind(r,54806))},46055:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(31658);let a=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},54806:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var s=r(60687),a=r(43210),l=r(26592),i=r(21092),n=r(16189),o=r(30474),d=r(85814),h=r.n(d),c=r(32730);function u({children:e}){return(0,s.jsx)(i.N,{children:(0,s.jsx)(l.v,{children:(0,s.jsx)(x,{children:e})})})}function x({children:e}){let t=(0,n.useRouter)(),{userRole:r}=(0,l.J)(),{theme:d,toggleTheme:u}=(0,i.D)(),[x,g]=(0,a.useState)(!1),m=async()=>{try{await fetch("/api/auth/logout",{method:"POST"}),localStorage.clear(),t.push("/ui/login")}catch(e){console.error("Failed to logout:",e)}},v=async()=>{t.push("/ui/dashboard/booking")};return(0,s.jsxs)("div",{className:`flex flex-col h-screen ${"dark"===d?"bg-gray-900":"bg-gray-100"}`,children:[(0,s.jsxs)("nav",{className:`w-full ${"dark"===d?"bg-gray-800":"bg-white shadow-md"} p-4 flex justify-between items-center`,children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(o.default,{src:"/flynext.png",alt:"FlyNext logo",width:256,height:256,className:"w-6 h-auto"}),(0,s.jsx)("h2",{className:`text-xl font-bold ${"dark"===d?"text-white":"text-gray-800"}`,children:"FlyNext"})]}),(0,s.jsx)("div",{className:"hidden lg:block",children:(0,s.jsxs)("ul",{className:"flex items-center space-x-4",children:[(0,s.jsx)("li",{children:(0,s.jsx)("button",{onClick:u,className:`p-2 rounded-full transition-colors ${"dark"===d?"hover:bg-gray-700 text-gray-200":"hover:bg-gray-200 text-gray-600"}`,title:`Switch to ${"dark"===d?"light":"dark"} mode`,children:"dark"===d?(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})}):(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})})})}),("USER"===r||"HOTEL_OWNER"===r)&&(0,s.jsx)("li",{children:(0,s.jsx)(h(),{href:"/ui/dashboard/notifications",className:"relative",children:(0,s.jsx)(c.default,{},Date.now())})}),("USER"===r||"HOTEL_OWNER"===r)&&(0,s.jsx)("li",{children:(0,s.jsx)("button",{onClick:v,className:`p-2 rounded-full transition-colors ${"dark"===d?"hover:bg-gray-700 text-gray-200":"hover:bg-gray-200 text-gray-600"}`,title:"View Current Booking",children:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 3h2l.4 2m1.2 6h11.45a1 1 0 00.98-.8l1.2-6A1 1 0 0019.3 3H6.21M6.6 11l1.5 7.5a1 1 0 00.99.8h8.82a1 1 0 00.98-.8L21 8H7"}),(0,s.jsx)("circle",{cx:"9",cy:"20",r:"1.5"}),(0,s.jsx)("circle",{cx:"17",cy:"20",r:"1.5"})]})})}),(0,s.jsx)("li",{children:(0,s.jsx)("button",{onClick:m,className:`hover:underline cursor-pointer ${"dark"===d?"text-white":"text-gray-800"}`,children:"Logout"})}),(0,s.jsx)("li",{children:(0,s.jsx)(h(),{href:"/ui/dashboard/flights",className:`hover:underline ${"dark"===d?"text-white":"text-gray-800"}`,children:"Flights"})}),(0,s.jsx)("li",{children:(0,s.jsx)(h(),{href:"/ui/dashboard/all-hotels",className:`hover:underline ${"dark"===d?"text-white":"text-gray-800"}`,children:"All Hotels"})}),("USER"===r||"HOTEL_OWNER"===r)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("li",{children:(0,s.jsx)(h(),{href:"/ui/dashboard/bookings",className:`hover:underline ${"dark"===d?"text-white":"text-gray-800"}`,children:"My Bookings"})}),(0,s.jsx)("li",{children:(0,s.jsx)(h(),{href:"/ui/dashboard/profile",className:`hover:underline ${"dark"===d?"text-white":"text-gray-800"}`,children:"Profile"})}),(0,s.jsx)("li",{children:(0,s.jsx)(h(),{href:"/ui/dashboard/add-hotel",className:`hover:underline ${"dark"===d?"text-white":"text-gray-800"}`,children:"Add Hotel"})})]}),"HOTEL_OWNER"===r&&(0,s.jsx)("li",{children:(0,s.jsx)(h(),{href:"/ui/dashboard/my-hotels",className:`hover:underline ${"dark"===d?"text-white":"text-gray-800"}`,children:"My Hotels"})})]})}),(0,s.jsxs)("div",{className:"flex items-center space-x-4 lg:hidden",children:[(0,s.jsx)("button",{onClick:u,className:`p-2 rounded-full transition-colors ${"dark"===d?"hover:bg-gray-700 text-gray-200":"hover:bg-gray-200 text-gray-600"}`,title:`Switch to ${"dark"===d?"light":"dark"} mode`,children:"dark"===d?(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})}):(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})})}),("USER"===r||"HOTEL_OWNER"===r)&&(0,s.jsx)(h(),{href:"/ui/dashboard/notifications",className:"relative",children:(0,s.jsx)(c.default,{},Date.now())}),(0,s.jsx)("button",{onClick:()=>{g(e=>!e)},className:`p-2 rounded-full transition-colors ${"dark"===d?"hover:bg-gray-700":"hover:bg-gray-200"}`,children:x?(0,s.jsx)("svg",{className:`w-6 h-6 ${"dark"===d?"text-white":"text-gray-800"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):(0,s.jsx)("svg",{className:`w-6 h-6 ${"dark"===d?"text-white":"text-gray-800"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})]}),x&&(0,s.jsx)("div",{className:`lg:hidden ${"dark"===d?"bg-gray-800":"bg-white shadow-md"} px-6 py-4 space-y-2`,children:(0,s.jsxs)("ul",{className:"flex flex-col gap-3 items-center text-center",children:[(0,s.jsx)("li",{children:(0,s.jsx)("button",{onClick:m,className:`hover:underline cursor-pointer ${"dark"===d?"text-white":"text-gray-800"}`,children:"Logout"})}),(0,s.jsx)("li",{children:(0,s.jsx)(h(),{href:"/ui/dashboard/flights",className:`hover:underline ${"dark"===d?"text-white":"text-gray-800"}`,children:"Flights"})}),(0,s.jsx)("li",{children:(0,s.jsx)(h(),{href:"/ui/dashboard/all-hotels",className:`hover:underline ${"dark"===d?"text-white":"text-gray-800"}`,children:"All Hotels"})}),("USER"===r||"HOTEL_OWNER"===r)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("li",{children:(0,s.jsx)(h(),{href:"/ui/dashboard/bookings",className:`hover:underline ${"dark"===d?"text-white":"text-gray-800"}`,children:"My Bookings"})}),(0,s.jsx)("li",{children:(0,s.jsx)(h(),{href:"/ui/dashboard/profile",className:`hover:underline ${"dark"===d?"text-white":"text-gray-800"}`,children:"Profile"})}),(0,s.jsx)("li",{children:(0,s.jsx)(h(),{href:"/ui/dashboard/add-hotel",className:`hover:underline ${"dark"===d?"text-white":"text-gray-800"}`,children:"Add Hotel"})})]}),"HOTEL_OWNER"===r&&(0,s.jsx)("li",{children:(0,s.jsx)(h(),{href:"/ui/dashboard/my-hotels",className:`hover:underline ${"dark"===d?"text-white":"text-gray-800"}`,children:"My Hotels"})})]})}),(0,s.jsx)("main",{className:`flex-1 p-4 ${"dark"===d?"bg-gray-900":"bg-gray-100"}`,children:e})]})}},56444:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,16444,23)),Promise.resolve().then(r.t.bind(r,16042,23)),Promise.resolve().then(r.t.bind(r,88170,23)),Promise.resolve().then(r.t.bind(r,49477,23)),Promise.resolve().then(r.t.bind(r,29345,23)),Promise.resolve().then(r.t.bind(r,12089,23)),Promise.resolve().then(r.t.bind(r,46577,23)),Promise.resolve().then(r.t.bind(r,31307,23))},62844:(e,t,r)=>{"use strict";async function s(e,t={}){let r=await fetch(e,{...t,credentials:"include"});if(401===r.status||403===r.status){if(!await a())return new Response(JSON.stringify({message:"Session expired"}),{status:440,headers:{"Content-Type":"application/json"}});r=await fetch(e,{...t,credentials:"include"})}return r}r.d(t,{v$:()=>s}),r(79119),r(69025),process.env.ACCESS_SECRET,process.env.REFRESH_SECRET,process.env.ACCESS_TOKEN_EXPIRY,process.env.REFRESH_TOKEN_EXPIRY,parseInt(process.env.SALT_ROUNDS,10);async function a(){try{if(!(await fetch("/api/auth/refresh",{method:"POST",credentials:"include"})).ok)return!1;return!0}catch(e){return!1}}},66172:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,86346,23)),Promise.resolve().then(r.t.bind(r,27924,23)),Promise.resolve().then(r.t.bind(r,35656,23)),Promise.resolve().then(r.t.bind(r,40099,23)),Promise.resolve().then(r.t.bind(r,38243,23)),Promise.resolve().then(r.t.bind(r,28827,23)),Promise.resolve().then(r.t.bind(r,62763,23)),Promise.resolve().then(r.t.bind(r,97173,23))},69770:(e,t,r)=>{Promise.resolve().then(r.bind(r,13376))},82704:()=>{},96289:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,4536,23))}};