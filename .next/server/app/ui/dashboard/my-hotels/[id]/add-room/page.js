(()=>{var e={};e.id=5505,e.ids=[5505],e.modules={2864:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/app/app/ui/dashboard/my-hotels/[id]/add-room/page.js\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/app/app/ui/dashboard/my-hotels/[id]/add-room/page.js","default")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21288:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>p,routeModule:()=>c,tree:()=>l});var a=r(65239),s=r(48088),o=r(88170),i=r.n(o),d=r(30893),n={};for(let e in d)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>d[e]);r.d(t,n);let l={children:["",{children:["ui",{children:["dashboard",{children:["my-hotels",{children:["[id]",{children:["add-room",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,2864)),"/app/app/ui/dashboard/my-hotels/[id]/add-room/page.js"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,13376)),"/app/app/ui/dashboard/layout.js"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,32648)),"/app/app/layout.js"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,p=["/app/app/ui/dashboard/my-hotels/[id]/add-room/page.js"],u={require:r,loadChunk:()=>Promise.resolve()},c=new a.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/ui/dashboard/my-hotels/[id]/add-room/page",pathname:"/ui/dashboard/my-hotels/[id]/add-room",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},55511:e=>{"use strict";e.exports=require("crypto")},58130:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var a=r(60687),s=r(43210),o=r(62844),i=r(16189),d=r(21092);function n(){let{id:e}=(0,i.useParams)(),t=(0,i.useRouter)(),{theme:r}=(0,d.D)(),[n,l]=(0,s.useState)("Double"),[p,u]=(0,s.useState)(!0),[c,m]=(0,s.useState)(100),[h,x]=(0,s.useState)(""),[g,b]=(0,s.useState)([]),[y,f]=(0,s.useState)([]),[v,j]=(0,s.useState)(!1),[k,w]=(0,s.useState)(""),[N,P]=(0,s.useState)(""),$=(e,t)=>{let r=e.target.files;r&&("images"===t?f([...y,...Array.from(r)]):setLogo(r[0]))},C=e=>{f(y.filter((t,r)=>r!==e))},q=e=>{b(g.filter((t,r)=>r!==e))},A=async r=>{r.preventDefault(),j(!0),w(""),P("");try{let r=[],a=[];for(let e of g)a.push(e);let s=await (0,o.v$)(`/api/hotel-owner/my-hotels/${e}/add-room`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:n,available:p,pricePerNight:c,amenities:a,images:r})}),i=await s.json();if(!s.ok)throw 440===s.status&&t.push("/ui/error/session-expired"),Error(i.error);for(let a of y){let s=new FormData;s.append("file",a),s.append("upload-type","hotel-room-image"),s.append("hotel-id",e),s.append("room-id",i.room.id);let d=await (0,o.v$)("/api/upload",{method:"POST",credentials:"include",body:s}),n=await d.json();if(!d.ok)throw 440===d.status&&t.push("/ui/error/session-expired"),Error(n.error);r.push(n.url)}s=await (0,o.v$)(`/api/hotel-owner/my-hotels/${e}/add-room`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({roomId:i.room.id,images:r})});let d=await s.json();if(!s.ok)throw 440===s.status&&t.push("/ui/error/session-expired"),Error(d.error);P("Room added successfully!"),l("Double"),u(!0),m(100),b([]),f([])}catch(e){w(e.message||"An unexpected error occurred.")}finally{j(!1)}};return(0,a.jsxs)("div",{className:`max-w-3xl mx-auto p-6 rounded-2xl shadow-lg space-y-6 ${"dark"===r?"bg-gray-800 text-white":"bg-white text-gray-800"}`,children:[(0,a.jsx)("h2",{className:`text-3xl font-bold ${"dark"===r?"text-white":"text-black"}`,children:"Add a New Room"}),(0,a.jsxs)("form",{onSubmit:A,className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:`block text-sm font-medium mb-1 ${"dark"===r?"text-gray-300":"text-gray-800"}`,children:"Room Type"}),(0,a.jsx)("input",{type:"text",value:n,onChange:e=>l(e.target.value),required:!0,className:`w-full border rounded-lg p-2 ${"dark"===r?"bg-gray-700 border-gray-600 text-white":"border-gray-300 text-black"}`})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:p,onChange:e=>u(e.target.checked),id:"available",className:`h-4 w-4 rounded ${"dark"===r?"text-blue-400 border-gray-600":"text-blue-600 border-gray-300"}`}),(0,a.jsx)("label",{htmlFor:"available",className:`text-sm font-medium ${"dark"===r?"text-gray-300":"text-gray-800"}`,children:"Available"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:`block text-sm font-medium mb-1 ${"dark"===r?"text-gray-300":"text-gray-800"}`,children:"Price Per Night"}),(0,a.jsx)("input",{type:"number",step:"0.01",value:c,onChange:e=>m(e.target.value),required:!0,className:`w-full border rounded-lg p-2 ${"dark"===r?"bg-gray-700 border-gray-600 text-white":"border-gray-300 text-black"}`})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:`block text-sm font-medium mb-1 ${"dark"===r?"text-gray-300":"text-gray-800"}`,children:"Amenities (Optional)"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",value:h,onChange:e=>x(e.target.value),placeholder:"e.g., Wi-Fi, Air Conditioning",className:`flex-1 border rounded-lg p-2 ${"dark"===r?"bg-gray-700 border-gray-600 text-white":"border-gray-300 text-black"}`}),(0,a.jsx)("button",{onClick:()=>{""===h.trim()||g.includes(h)||(b([...g,h]),x(""))},type:"button",className:`px-4 py-2 rounded-lg transition ${"dark"===r?"bg-green-600 hover:bg-green-700 text-white":"bg-green-500 hover:bg-green-600 text-white"}`,children:"Add"})]}),g.length>0&&(0,a.jsx)("div",{className:"mt-2 space-y-1",children:g.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:`text-sm ${"dark"===r?"text-gray-300":"text-gray-800"}`,children:e}),(0,a.jsx)("button",{type:"button",onClick:()=>q(t),className:"text-red-500 text-sm hover:underline",children:"Remove"})]},t))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:`block text-sm font-medium ${"dark"===r?"text-gray-300":"text-gray-800"}`,children:"Room Images (Optional)"}),(0,a.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:e=>$(e,"images"),className:`w-full p-2 border rounded ${"dark"===r?"bg-gray-700 border-gray-600 text-white":"border-gray-300 text-black"}`}),y.length>0&&(0,a.jsx)("div",{className:"mt-2 space-y-1",children:y.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:`text-sm truncate ${"dark"===r?"text-gray-300":"text-gray-800"}`,children:e.name}),(0,a.jsx)("button",{type:"button",onClick:()=>C(t),className:"text-red-500 text-sm hover:underline",children:"Remove"})]},t))})]}),k&&(0,a.jsx)("div",{className:`p-4 rounded-lg ${"dark"===r?"bg-red-900/50":"bg-red-100"}`,children:(0,a.jsx)("p",{className:"text-red-500",children:k})}),N&&(0,a.jsx)("div",{className:`p-4 rounded-lg ${"dark"===r?"bg-green-900/50":"bg-green-100"}`,children:(0,a.jsx)("p",{className:"text-green-500",children:N})}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,a.jsx)("button",{type:"submit",disabled:v,className:`py-2 px-5 rounded-lg transition ${"dark"===r?"bg-blue-600 hover:bg-blue-700 text-white":"bg-blue-500 hover:bg-blue-600 text-white"}`,children:v?"Adding...":"Add Room"}),(0,a.jsx)("button",{type:"button",onClick:()=>t.back(),className:`py-2 px-5 rounded-lg transition ${"dark"===r?"bg-gray-600 hover:bg-gray-700 text-white":"bg-gray-500 hover:bg-gray-600 text-white"}`,children:"Cancel"})]})]})]})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64578:(e,t,r)=>{Promise.resolve().then(r.bind(r,2864))},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},82730:(e,t,r)=>{Promise.resolve().then(r.bind(r,58130))}};var t=require("../../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[7719,1179,1658,2142,1026],()=>r(21288));module.exports=a})();