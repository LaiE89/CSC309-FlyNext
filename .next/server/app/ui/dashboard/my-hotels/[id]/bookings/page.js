(()=>{var e={};e.id=1880,e.ids=[1880],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},5211:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/app/app/ui/dashboard/my-hotels/[id]/bookings/page.js\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/app/app/ui/dashboard/my-hotels/[id]/bookings/page.js","default")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},55511:e=>{"use strict";e.exports=require("crypto")},59709:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var a=r(60687),s=r(43210),d=r(16189),o=r(62844),l=r(21092);function i(){let{id:e}=(0,d.useParams)(),t=(0,d.useRouter)(),{theme:r}=(0,l.D)(),[i,n]=(0,s.useState)([]),[c,x]=(0,s.useState)([]),[h,p]=(0,s.useState)(!0),[m,u]=(0,s.useState)(""),[b,g]=(0,s.useState)(""),[y,k]=(0,s.useState)({startDate:"",endDate:"",roomType:""}),f=async()=>{p(!0);try{let r=new URLSearchParams(y),a=await (0,o.v$)(`/api/hotel-owner/my-hotels/${e}/bookings?${r}`,{method:"GET",credentials:"include"}),s=await a.json();if(!a.ok)throw 440===a.status&&t.push("/ui/error/session-expired"),Error(s.error);n(s.bookings),x(s.roomAvailability||[])}catch(e){u(e.message||"An error occurred.")}finally{p(!1)}},j=e=>{let{name:t,value:r}=e.target;k(e=>({...e,[t]:r}))},v=async(r,a)=>{if(confirm("Are you sure you want to delete this booking?"))try{let s=await (0,o.v$)(`/api/hotel-owner/my-hotels/${e}/bookings/${r}`,{method:"DELETE",credentials:"include"}),d=await s.json();if(!s.ok)throw 440===s.status&&t.push("/ui/error/session-expired"),Error(d.error);n(e=>e.filter(e=>e.id!==r)),x(e=>e.map(e=>e.type===a?{...e,available:e.available+1}:e)),g("Booking deleted successfully!")}catch(e){u(e.message||"An error occurred.")}};return h?(0,a.jsx)("div",{className:`flex justify-center items-center h-64 ${"dark"===r?"text-white":"text-gray-800"}`,children:(0,a.jsx)("div",{className:"text-lg font-medium animate-pulse",children:"Loading..."})}):(0,a.jsxs)("div",{className:`max-w-5xl mx-auto p-6 rounded-2xl shadow-lg space-y-6 ${"dark"===r?"bg-gray-800 text-white":"bg-white text-gray-800"}`,children:[(0,a.jsx)("h2",{className:`text-3xl font-bold ${"dark"===r?"text-white":"text-black"}`,children:"Hotel Bookings"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{htmlFor:"startDate",className:`text-sm font-medium mb-1 ${"dark"===r?"text-gray-300":"text-gray-800"}`,children:"Check-in Date"}),(0,a.jsx)("input",{type:"date",id:"startDate",name:"startDate",value:y.startDate,onChange:j,className:`border rounded-lg p-2 ${"dark"===r?"bg-gray-700 border-gray-600 text-white":"border-gray-300 text-black"}`})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{htmlFor:"endDate",className:`text-sm font-medium mb-1 ${"dark"===r?"text-gray-300":"text-gray-800"}`,children:"Check-out date"}),(0,a.jsx)("input",{type:"date",id:"endDate",name:"endDate",value:y.endDate,onChange:j,className:`border rounded-lg p-2 ${"dark"===r?"bg-gray-700 border-gray-600 text-white":"border-gray-300 text-black"}`})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("label",{htmlFor:"roomType",className:`text-sm font-medium mb-1 ${"dark"===r?"text-gray-300":"text-gray-800"}`,children:"Room Type"}),(0,a.jsx)("input",{type:"text",id:"roomType",name:"roomType",value:y.roomType,onChange:j,placeholder:"Room Type",className:`border rounded-lg p-2 ${"dark"===r?"bg-gray-700 border-gray-600 text-white":"border-gray-300 text-black"}`})]}),(0,a.jsx)("div",{className:"flex items-end",children:(0,a.jsx)("button",{onClick:f,className:`w-full px-4 py-2 rounded-lg transition ${"dark"===r?"bg-blue-600 hover:bg-blue-700 text-white":"bg-blue-500 hover:bg-blue-600 text-white"}`,children:"Apply Filters"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:`text-xl font-semibold mb-2 ${"dark"===r?"text-white":"text-black"}`,children:"Room Availability"}),(0,a.jsx)("div",{className:`overflow-x-auto rounded-lg border ${"dark"===r?"border-gray-600":"border-gray-200"}`,children:(0,a.jsxs)("table",{className:`table-fixed w-full text-sm text-sm ${"dark"===r?"text-gray-300":"text-gray-700"}`,children:[(0,a.jsx)("thead",{className:"dark"===r?"bg-gray-700":"bg-gray-100",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:`w-1/2 px-4 py-2 text-left font-medium ${"dark"===r?"text-white":"text-black"}`,children:"Room Type"}),(0,a.jsx)("th",{className:`w-1/2 px-4 py-2 text-left font-medium ${"dark"===r?"text-white":"text-black"}`,children:"Number of Available Rooms"})]})}),(0,a.jsx)("tbody",{className:"divide-y",children:c.length>0?c.map(e=>(0,a.jsxs)("tr",{className:"dark"===r?"hover:bg-gray-700":"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:`px-4 py-2 ${"dark"===r?"text-gray-300":"text-black"}`,children:e.type}),(0,a.jsx)("td",{className:`px-4 py-2 ${"dark"===r?"text-gray-300":"text-black"}`,children:e.available})]},e.type)):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:2,className:`px-4 py-2 text-center ${"dark"===r?"text-gray-300":"text-black"}`,children:"No available rooms found."})})})]})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:`text-xl font-semibold mb-2 ${"dark"===r?"text-white":"text-gray-800"}`,children:"Bookings"}),0===i.length?(0,a.jsx)("p",{className:`${"dark"===r?"text-gray-400":"text-gray-500"}`,children:"No bookings found."}):(0,a.jsx)("div",{className:`overflow-x-auto rounded-lg border ${"dark"===r?"border-gray-600":"border-gray-200"}`,children:(0,a.jsxs)("table",{className:`min-w-full text-sm ${"dark"===r?"text-gray-300":"text-black"}`,children:[(0,a.jsx)("thead",{className:"dark"===r?"bg-gray-700":"bg-gray-100",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:`px-4 py-2 text-left font-medium ${"dark"===r?"text-white":"text-black"}`,children:"Guest ID"}),(0,a.jsx)("th",{className:`px-4 py-2 text-left font-medium ${"dark"===r?"text-white":"text-black"}`,children:"Room ID"}),(0,a.jsx)("th",{className:`px-4 py-2 text-left font-medium ${"dark"===r?"text-white":"text-black"}`,children:"Room Type"}),(0,a.jsx)("th",{className:`px-4 py-2 text-left font-medium ${"dark"===r?"text-white":"text-black"}`,children:"Check-in"}),(0,a.jsx)("th",{className:`px-4 py-2 text-left font-medium ${"dark"===r?"text-white":"text-black"}`,children:"Check-out"}),(0,a.jsx)("th",{className:`px-4 py-2 text-left font-medium ${"dark"===r?"text-white":"text-black"}`,children:"Action"})]})}),(0,a.jsx)("tbody",{className:"divide-y",children:i.map(e=>(0,a.jsxs)("tr",{className:"dark"===r?"hover:bg-gray-700":"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:`px-4 py-2 ${"dark"===r?"text-gray-300":"text-black"}`,children:e.userId}),(0,a.jsx)("td",{className:`px-4 py-2 ${"dark"===r?"text-gray-300":"text-black"}`,children:e.roomId}),(0,a.jsx)("td",{className:`px-4 py-2 ${"dark"===r?"text-gray-300":"text-black"}`,children:e.room?.type||"N/A"}),(0,a.jsx)("td",{className:`px-4 py-2 ${"dark"===r?"text-gray-300":"text-black"}`,children:new Date(e.checkIn).toLocaleDateString()}),(0,a.jsx)("td",{className:`px-4 py-2 ${"dark"===r?"text-gray-300":"text-black"}`,children:new Date(e.checkOut).toLocaleDateString()}),(0,a.jsx)("td",{className:`px-4 py-2 ${"dark"===r?"text-gray-300":"text-black"}`,children:(0,a.jsx)("button",{onClick:()=>v(e.id,e.room?.type),className:`px-3 py-1.5 rounded transition text-sm ${"dark"===r?"bg-red-600 hover:bg-red-700 text-white":"bg-red-500 hover:bg-red-600 text-white"}`,children:"Delete"})})]},e.id))})]})})]}),m&&(0,a.jsx)("div",{className:`p-4 rounded-lg ${"dark"===r?"bg-red-900/50":"bg-red-100"}`,children:(0,a.jsx)("p",{className:"text-red-500",children:m})}),b&&(0,a.jsx)("div",{className:`p-4 rounded-lg ${"dark"===r?"bg-green-900/50":"bg-green-100"}`,children:(0,a.jsx)("p",{className:"text-green-500",children:b})}),(0,a.jsx)("button",{onClick:()=>t.back(),className:`mt-4 py-2 px-4 rounded-lg transition ${"dark"===r?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-100 hover:bg-gray-200 text-blue-600"}`,children:"Go Back"})]})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},79716:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>x,pages:()=>c,routeModule:()=>h,tree:()=>n});var a=r(65239),s=r(48088),d=r(88170),o=r.n(d),l=r(30893),i={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);r.d(t,i);let n={children:["",{children:["ui",{children:["dashboard",{children:["my-hotels",{children:["[id]",{children:["bookings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,5211)),"/app/app/ui/dashboard/my-hotels/[id]/bookings/page.js"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,13376)),"/app/app/ui/dashboard/layout.js"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,32648)),"/app/app/layout.js"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/app/app/ui/dashboard/my-hotels/[id]/bookings/page.js"],x={require:r,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/ui/dashboard/my-hotels/[id]/bookings/page",pathname:"/ui/dashboard/my-hotels/[id]/bookings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:n}})},84177:(e,t,r)=>{Promise.resolve().then(r.bind(r,59709))},93905:(e,t,r)=>{Promise.resolve().then(r.bind(r,5211))}};var t=require("../../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[7719,1179,1658,2142,1026],()=>r(79716));module.exports=a})();