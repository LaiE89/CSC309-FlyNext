(()=>{var e={};e.id=3820,e.ids=[3820],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},6349:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>c});var a=t(60687),s=t(43210),i=t(16189),l=t(62844),o=t(26592),d=t(21092),n=t(30474);function c(){let e=(0,i.useRouter)(),{user:r,setUser:t}=(0,o.J)(),{theme:c}=(0,d.D)(),[p,x]=(0,s.useState)(null),[u,m]=(0,s.useState)(!1),[h,g]=(0,s.useState)(null),[b,f]=(0,s.useState)(null),[y,j]=(0,s.useState)({firstName:"",lastName:"",profilePicture:"",phone:""}),N=e=>{j(r=>({...r,[e.target.name]:e.target.value}))},v=async a=>{a.preventDefault();let s=r.profilePicture;if(h)try{let r=new FormData;r.append("file",h),r.append("upload-type","profile-picture");let t=await (0,l.v$)("/api/upload",{method:"POST",credentials:"include",body:r}),a=await t.json();if(!t.ok)throw 440===t.status&&e.push("/ui/error/session-expired"),Error(a.error);s=a.url}catch(e){x(e.message||"An unexpected error occurred.");return}try{let r=await (0,l.v$)("/api/user/profile",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({...y,profilePicture:s})}),a=await r.json();if(!r.ok)throw 440===r.status&&e.push("/ui/error/session-expired"),Error(a.error);t(a),m(!1),g(null),f(null)}catch(e){x(e.message||"An unexpected error occurred.")}};return(0,a.jsxs)("div",{className:`max-w-md mx-auto mt-10 shadow-md rounded-2xl p-6 text-center space-y-6 ${"dark"===c?"bg-gray-800 text-white":"bg-white text-gray-800"}`,children:[(0,a.jsx)("h1",{className:`text-2xl font-bold ${"dark"===c?"text-white":"text-gray-800"}`,children:"My Profile"}),p&&(0,a.jsx)("p",{className:"text-red-500 font-medium",children:p}),r?(0,a.jsx)("div",{className:"space-y-4",children:u?(0,a.jsxs)("form",{onSubmit:v,className:"grid gap-4 text-left",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("label",{className:`font-semibold ${"dark"===c?"text-gray-300":"text-gray-800"}`,children:"First Name"}),(0,a.jsx)("input",{type:"text",name:"firstName",value:y.firstName,onChange:N,className:`border rounded px-3 py-2 ${"dark"===c?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-black"}`})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("label",{className:`font-semibold ${"dark"===c?"text-gray-300":"text-gray-800"}`,children:"Last Name"}),(0,a.jsx)("input",{type:"text",name:"lastName",value:y.lastName,onChange:N,className:`border rounded px-3 py-2 ${"dark"===c?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-black"}`})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("label",{className:`font-semibold ${"dark"===c?"text-gray-300":"text-gray-800"}`,children:"Phone Number"}),(0,a.jsx)("input",{type:"tel",name:"phone",pattern:"[0-9]{3}-[0-9]{3}-[0-9]{4}",value:y.phone,onChange:N,className:`border rounded px-3 py-2 ${"dark"===c?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300 text-black"}`})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("label",{className:`font-semibold ${"dark"===c?"text-gray-300":"text-gray-800"}`,children:"Profile Picture"}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{let r=e.target.files[0];r?(g(r),f(URL.createObjectURL(r))):(g(null),f(null))},className:`text-sm ${"dark"===c?"text-gray-300":"text-gray-800"}`})]}),(0,a.jsx)("div",{className:"flex justify-center",children:b?(0,a.jsx)(n.default,{src:b,alt:"Preview",width:256,height:256,className:`rounded-full object-cover w-48 h-48 border-4 shadow-md ${"dark"===c?"border-gray-600":"border-gray-300"}`}):r.profilePicture?(0,a.jsx)(n.default,{src:r.profilePicture,alt:"Current",width:256,height:256,className:`rounded-full object-cover w-48 h-48 border-4 shadow-md ${"dark"===c?"border-gray-600":"border-gray-300"}`}):(0,a.jsx)("span",{className:"dark"===c?"text-gray-300":"text-gray-800",children:"No picture"})}),(0,a.jsxs)("div",{className:"flex justify-center gap-4 mt-4",children:[(0,a.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition",children:"Save"}),(0,a.jsx)("button",{type:"button",onClick:()=>m(!1),className:`px-4 py-2 rounded-lg transition ${"dark"===c?"bg-gray-700 text-white hover:bg-gray-600":"bg-gray-300 text-gray-800 hover:bg-gray-400"}`,children:"Cancel"})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-6",children:[(0,a.jsx)("div",{className:"w-48 h-48",children:(0,a.jsx)(n.default,{src:r.profilePicture||"/default-profile.png",alt:"Profile",width:256,height:256,className:`rounded-full object-cover w-48 h-48 border-4 shadow-md ${"dark"===c?"border-gray-600":"border-gray-300"}`})}),(0,a.jsx)("div",{className:"w-full",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:`text-sm font-semibold ${"dark"===c?"text-gray-400":"text-gray-500"}`,children:"First Name"}),(0,a.jsx)("p",{className:"dark"===c?"text-gray-300":"text-gray-800",children:r.firstName})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:`text-sm font-semibold ${"dark"===c?"text-gray-400":"text-gray-500"}`,children:"Last Name"}),(0,a.jsx)("p",{className:"dark"===c?"text-gray-300":"text-gray-800",children:r.lastName})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:`text-sm font-semibold ${"dark"===c?"text-gray-400":"text-gray-500"}`,children:"Email"}),(0,a.jsx)("p",{className:`text-base break-all ${"dark"===c?"text-gray-300":"text-gray-800"}`,children:r.email})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:`text-sm font-semibold ${"dark"===c?"text-gray-400":"text-gray-500"}`,children:"Role"}),(0,a.jsx)("p",{className:"dark"===c?"text-gray-300":"text-gray-800",children:"HOTEL_OWNER"==r.role?"Hotel Owner":"User"})]}),(0,a.jsxs)("div",{className:"sm:col-span-2",children:[(0,a.jsx)("p",{className:`text-sm font-semibold ${"dark"===c?"text-gray-400":"text-gray-500"}`,children:"Phone Number"}),(0,a.jsx)("p",{className:"dark"===c?"text-gray-300":"text-gray-800",children:r.phone?r.phone:"None"})]})]})})]}),(0,a.jsx)("div",{className:"flex flex-wrap justify-center gap-3 mt-2",children:(0,a.jsx)("button",{onClick:()=>m(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition",children:"Edit Profile"})})]})}):(0,a.jsx)("p",{className:"dark"===c?"text-gray-300":"text-gray-800",children:"Loading..."})]})}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},15107:(e,r,t)=>{Promise.resolve().then(t.bind(t,90567))},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},55511:e=>{"use strict";e.exports=require("crypto")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},80763:(e,r,t)=>{Promise.resolve().then(t.bind(t,6349))},89316:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>l.a,__next_app__:()=>p,pages:()=>c,routeModule:()=>x,tree:()=>n});var a=t(65239),s=t(48088),i=t(88170),l=t.n(i),o=t(30893),d={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);t.d(r,d);let n={children:["",{children:["ui",{children:["dashboard",{children:["profile",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,90567)),"/app/app/ui/dashboard/profile/page.js"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,13376)),"/app/app/ui/dashboard/layout.js"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,32648)),"/app/app/layout.js"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/app/app/ui/dashboard/profile/page.js"],p={require:t,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/ui/dashboard/profile/page",pathname:"/ui/dashboard/profile",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:n}})},90567:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>a});let a=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/app/app/ui/dashboard/profile/page.js\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/app/app/ui/dashboard/profile/page.js","default")}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[7719,1179,1658,2142,1026],()=>t(89316));module.exports=a})();