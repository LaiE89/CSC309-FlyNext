(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2390],{43:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>h});var r=a(5155),c=a(2115),s=a(5695),l=a(6766),n=a(6874),i=a.n(n),d=a(5550);function o(){let e=(0,s.useRouter)(),t=(0,s.useSearchParams)(),{theme:a}=(0,d.D)(),n=t.get("checkIn")||"",o=t.get("checkOut")||"",h=t.get("city")||"",u=t.get("name")||"",g=t.get("starRating")||"",m=t.get("minPrice")||"",x=t.get("maxPrice")||"",b="true"===t.get("priceAscending"),p=t.get("page")||0,[k,y]=(0,c.useState)([]),[w,f]=(0,c.useState)(!0),[j,v]=(0,c.useState)(""),[N,S]=(0,c.useState)(h),[P,C]=(0,c.useState)(n),[R,E]=(0,c.useState)(o),[A,F]=(0,c.useState)(u),[O,I]=(0,c.useState)(g),[L,_]=(0,c.useState)(m),[M,T]=(0,c.useState)(x),[D,U]=(0,c.useState)(b),[G,H]=(0,c.useState)(p),B=async()=>{f(!0);try{let e=new URLSearchParams;P&&e.append("checkIn",P),R&&e.append("checkOut",R),N&&e.append("city",N),A&&e.append("name",A),O&&e.append("starRating",O),L&&e.append("minPrice",L),M&&e.append("maxPrice",M),D&&e.append("priceAscending",D);let t=await fetch("/api/visitor/hotels?".concat(e.toString()),{method:"GET",credentials:"include"});if(!t.ok)throw Error("Failed to fetch hotels.");let a=await t.json();y(a.hotels||[]),H(0)}catch(e){v(e instanceof Error?e.message:"An error occurred.")}finally{f(!1)}};(0,c.useEffect)(()=>{B()},[]);let $=(G+1)*9,q=9*G,z=null==k?void 0:k.slice(q,$);return((0,c.useEffect)(()=>{let a=new URLSearchParams(t);a.set("page",G),a.get("page")!==t.get("page")&&e.push("?".concat(a.toString()),{shallow:!0,scroll:!1})},[G,t,e]),w)?(0,r.jsx)("div",{className:"flex justify-center items-center h-64 ".concat("dark"===a?"text-white":"text-gray-800"),children:(0,r.jsx)("div",{className:"text-lg font-medium animate-pulse",children:"Loading hotels..."})}):j?(0,r.jsx)("div",{className:"flex justify-center items-center h-64 ".concat("dark"===a?"text-white":"text-gray-800"),children:(0,r.jsxs)("div",{className:"px-6 py-4 rounded-md shadow-md bg-white",children:[(0,r.jsx)("p",{className:"font-semibold text-red-500",children:"Error:"}),(0,r.jsx)("p",{className:"text-red-500",children:j}),(0,r.jsx)("button",{onClick:()=>e.back(),className:"hover:underline cursor-pointer mt-2 text-red-500",children:"Go Back"})]})}):(0,r.jsxs)("div",{className:"max-w-7xl mx-auto p-6 ".concat("dark"===a?"text-white":"text-gray-800"),children:[(0,r.jsx)("h2",{className:"text-3xl font-bold mb-4",children:"Available Hotels"}),(0,r.jsxs)("form",{className:"mb-6 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",onSubmit:a=>{a.preventDefault(),B();let r=new URLSearchParams(t);P&&r.set("checkIn",P),R&&r.set("checkOut",R),N&&r.set("city",N),A&&r.set("name",A),O&&r.set("starRating",O),L&&r.set("minPrice",L),M&&r.set("maxPrice",M),"boolean"==typeof D&&r.set("priceAscending",D.toString()),G&&r.set("page",G),e.push("?".concat(r.toString()),{scroll:!1})},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"checkIn",className:"block font-medium text-sm ".concat("dark"===a?"text-white":"text-gray-800"),children:"Check-In"}),(0,r.jsx)("input",{type:"date",id:"checkIn",value:P,onChange:e=>C(e.target.value),className:"mt-1 w-full border rounded-lg p-2 ".concat("dark"===a?"bg-gray-700 text-white border-gray-600":"bg-white text-black border-gray-300")})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"checkOut",className:"block font-medium text-sm ".concat("dark"===a?"text-white":"text-gray-800"),children:"Check-Out"}),(0,r.jsx)("input",{type:"date",id:"checkOut",value:R,onChange:e=>E(e.target.value),className:"mt-1 w-full border rounded-lg p-2 ".concat("dark"===a?"bg-gray-700 text-white border-gray-600":"bg-white text-black border-gray-300")})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"city",className:"block font-medium text-sm ".concat("dark"===a?"text-white":"text-gray-800"),children:"City"}),(0,r.jsx)("input",{type:"text",id:"city",placeholder:"Enter city",value:N,onChange:e=>S(e.target.value),className:"mt-1 w-full border rounded-lg p-2 ".concat("dark"===a?"bg-gray-700 text-white border-gray-600":"bg-white text-black border-gray-300")})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"name",className:"block font-medium text-sm ".concat("dark"===a?"text-white":"text-gray-800"),children:"Hotel Name"}),(0,r.jsx)("input",{type:"text",id:"name",placeholder:"Enter hotel name",value:A,onChange:e=>F(e.target.value),className:"mt-1 w-full border rounded-lg p-2 ".concat("dark"===a?"bg-gray-700 text-white border-gray-600":"bg-white text-black border-gray-300")})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"starRating",className:"block font-medium text-sm ".concat("dark"===a?"text-white":"text-gray-800"),children:"Star Rating"}),(0,r.jsx)("input",{type:"number",id:"starRating",placeholder:"e.g., 5",value:O,onChange:e=>I(e.target.value),className:"mt-1 w-full border rounded-lg p-2 ".concat("dark"===a?"bg-gray-700 text-white border-gray-600":"bg-white text-black border-gray-300"),min:"1",max:"5"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"minPrice",className:"block font-medium text-sm ".concat("dark"===a?"text-white":"text-gray-800"),children:"Min Price"}),(0,r.jsx)("input",{type:"number",id:"minPrice",placeholder:"Min price per night",value:L,onChange:e=>_(e.target.value),className:"mt-1 w-full border rounded-lg p-2 ".concat("dark"===a?"bg-gray-700 text-white border-gray-600":"bg-white text-black border-gray-300")})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"maxPrice",className:"block font-medium text-sm ".concat("dark"===a?"text-white":"text-gray-800"),children:"Max Price"}),(0,r.jsx)("input",{type:"number",id:"maxPrice",placeholder:"Max price per night",value:M,onChange:e=>T(e.target.value),className:"mt-1 w-full border rounded-lg p-2 ".concat("dark"===a?"bg-gray-700 text-white border-gray-600":"bg-white text-black border-gray-300")})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 mt-6",children:[(0,r.jsx)("input",{type:"checkbox",id:"isAscending",checked:D,onChange:e=>U(e.target.checked),className:"h-4 w-4 rounded ".concat("dark"===a?"text-blue-400":"text-blue-600")}),(0,r.jsx)("label",{htmlFor:"isAscending",className:"text-sm ".concat("dark"===a?"text-white":"text-gray-800"),children:"Starting Price Ascending"})]}),(0,r.jsx)("div",{className:"sm:col-span-2 lg:col-span-3 flex justify-end mt-2",children:(0,r.jsx)("button",{type:"submit",className:"px-6 py-2 rounded-lg transition ".concat("dark"===a?"bg-blue-600 hover:bg-blue-700 text-white":"bg-blue-500 hover:bg-blue-600 text-white"),children:"Search"})})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:z.map(e=>(0,r.jsx)(i(),{href:"/ui/dashboard/all-hotels/".concat(e.id,"?rooms=").concat(e.filteredRooms.join(",")),children:(0,r.jsxs)("div",{className:"rounded-lg shadow-md p-4 cursor-pointer hover:shadow-lg transition flex flex-col items-center ".concat("dark"===a?"bg-gray-800":"bg-white"),children:[(0,r.jsx)(l.default,{src:e.logo||"/default-hotel-logo.png",alt:"".concat(e.name," Logo"),width:256,height:256,className:"w-32 h-32 object-cover mb-3"}),(0,r.jsx)("h3",{className:"text-lg font-bold truncate ".concat("dark"===a?"text-white":"text-black"),children:e.name}),(0,r.jsxs)("p",{className:"".concat("dark"===a?"text-white":"text-black"),children:[e.starRating," Star"]}),(0,r.jsxs)("p",{className:"".concat("dark"===a?"text-white":"text-black"),children:["Starting at $",e.startingPrice||"N/A"]}),(0,r.jsx)("p",{className:"truncate ".concat("dark"===a?"text-white":"text-black"),children:e.mapLocation||"N/A"})]})},e.id))}),(0,r.jsxs)("div",{className:"flex justify-center mt-6 space-x-4",children:[(0,r.jsx)("button",{onClick:()=>{G>0&&H(G-1)},disabled:0===G,className:"py-2 px-4 rounded ".concat(0===G?"bg-gray-300":"bg-blue-600 text-white hover:bg-blue-700"),children:"Previous"}),(0,r.jsx)("button",{onClick:()=>{$<(null==k?void 0:k.length)&&H(G+1)},disabled:$>=(null==k?void 0:k.length),className:"py-2 px-4 rounded ".concat($>=(null==k?void 0:k.length)?"bg-gray-300":"bg-blue-600 text-white hover:bg-blue-700"),children:"Next"})]})]})}function h(){return(0,r.jsx)(c.Suspense,{children:(0,r.jsx)(o,{})})}},5550:(e,t,a)=>{"use strict";a.d(t,{D:()=>n,N:()=>l});var r=a(5155),c=a(2115);let s=(0,c.createContext)();function l(e){let{children:t}=e,[a,l]=(0,c.useState)("dark"),[n,i]=(0,c.useState)(!1);return((0,c.useEffect)(()=>{i(!0)},[]),n)?(0,r.jsx)(s.Provider,{value:{theme:a,toggleTheme:()=>{l("dark"===a?"light":"dark")}},children:t}):null}function n(){let e=(0,c.useContext)(s);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},5695:(e,t,a)=>{"use strict";var r=a(8999);a.o(r,"useParams")&&a.d(t,{useParams:function(){return r.useParams}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})},6733:(e,t,a)=>{Promise.resolve().then(a.bind(a,43))}},e=>{var t=t=>e(e.s=t);e.O(0,[6766,6874,8441,1684,7358],()=>t(6733)),_N_E=e.O()}]);