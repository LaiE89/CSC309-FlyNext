(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4481],{1384:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var n=r(5155),a=r(2115),s=r(9292),i=r(5695),o=r(5550);let u=(e,t)=>{let r;return function(){for(var n=arguments.length,a=Array(n),s=0;s<n;s++)a[s]=arguments[s];clearTimeout(r),r=setTimeout(()=>e(...a),t)}};function l(){let e=(0,i.useRouter)(),{theme:t}=(0,o.D)(),[r,l]=(0,a.useState)(0),[c,d]=(0,a.useState)(!0),[h,f]=(0,a.useState)(null),v=(0,a.useCallback)(async()=>{try{d(!0);let t=await (0,s.v$)("/api/user/notifications/badge");if(!t.ok){if(440===t.status){e.push("/ui/error/session-expired");return}throw Error("Failed to fetch unread notifications count")}let r=await t.json();l(r.unreadCount||0),f(null)}catch(e){console.error("Error fetching unread notifications count:",e),f(e.message)}finally{d(!1)}},[e]),E=(0,a.useCallback)(()=>u(v,1e3)(),[v]);return(0,a.useEffect)(()=>{let e,t=!0,r=()=>{t&&(E(),e=setTimeout(r,3e4))};return E(),e=setTimeout(r,3e4),()=>{t=!1,e&&clearTimeout(e)}},[E]),(0,n.jsx)("div",{className:"relative",children:(0,n.jsxs)("div",{title:"Notifications",className:"p-2 rounded-full transition-colors ".concat("dark"===t?"hover:bg-gray-700 text-gray-200":"hover:bg-gray-200 text-gray-600"),children:[(0,n.jsx)("svg",{className:"w-5 h-5 ".concat("dark"===t?"text-white":"text-gray-800"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),!c&&!h&&r>0&&(0,n.jsx)("span",{className:"absolute -top-1 -right-1 flex items-center justify-center w-5 h-5 text-xs font-bold text-white bg-red-500 rounded-full animate-pulse",children:r})]})})}},5550:(e,t,r)=>{"use strict";r.d(t,{D:()=>o,N:()=>i});var n=r(5155),a=r(2115);let s=(0,a.createContext)();function i(e){let{children:t}=e,[r,i]=(0,a.useState)("dark"),[o,u]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{u(!0)},[]),o)?(0,n.jsx)(s.Provider,{value:{theme:r,toggleTheme:()=>{i("dark"===r?"light":"dark")}},children:t}):null}function o(){let e=(0,a.useContext)(s);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},8678:(e,t,r)=>{Promise.resolve().then(r.bind(r,1384))},9292:(e,t,r)=>{"use strict";r.d(t,{v$:()=>a}),r(8801),r(9980);var n=r(9509);async function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=await fetch(e,{...t,credentials:"include"});if(401===r.status||403===r.status){if(!await s())return new Response(JSON.stringify({message:"Session expired"}),{status:440,headers:{"Content-Type":"application/json"}});r=await fetch(e,{...t,credentials:"include"})}return r}n.env.ACCESS_SECRET,n.env.REFRESH_SECRET,n.env.ACCESS_TOKEN_EXPIRY,n.env.REFRESH_TOKEN_EXPIRY,parseInt(n.env.SALT_ROUNDS,10);async function s(){try{if(!(await fetch("/api/auth/refresh",{method:"POST",credentials:"include"})).ok)return!1;return!0}catch(e){return!1}}},9825:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[9268,3877,8441,1684,7358],()=>t(8678)),_N_E=e.O()}]);