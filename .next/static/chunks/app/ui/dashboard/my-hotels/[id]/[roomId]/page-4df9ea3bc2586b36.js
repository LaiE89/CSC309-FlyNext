(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[686],{5550:(e,t,a)=>{"use strict";a.d(t,{D:()=>n,N:()=>l});var s=a(5155),r=a(2115);let i=(0,r.createContext)();function l(e){let{children:t}=e,[a,l]=(0,r.useState)("dark"),[n,c]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{c(!0)},[]),n)?(0,s.jsx)(i.Provider,{value:{theme:a,toggleTheme:()=>{l("dark"===a?"light":"dark")}},children:t}):null}function n(){let e=(0,r.useContext)(i);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},6061:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var s=a(5155),r=a(2115),i=a(5695),l=a(9292),n=a(6766),c=a(5550);function o(){var e;let{id:t,roomId:a}=(0,i.useParams)(),o=(0,i.useRouter)(),{theme:d}=(0,c.D)(),[h,u]=(0,r.useState)(null),[x,m]=(0,r.useState)(!0),[g,b]=(0,r.useState)(""),[p,v]=(0,r.useState)(""),[f,w]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{try{let e=await (0,l.v$)("/api/hotel-owner/my-hotels/".concat(t,"/").concat(a),{method:"GET",credentials:"include"}),s=await e.json();if(!e.ok)throw 440===e.status&&o.push("/ui/error/session-expired"),Error(s.error);u(s.room)}catch(e){b(e.message||"An unexpected error occurred.")}finally{m(!1)}})()},[t,a,o]);let y=async e=>{m(!0),b(""),v("");try{let e=await (0,l.v$)("/api/hotel-owner/my-hotels/".concat(t,"/").concat(a,"/edit"),{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({available:!h.available})}),s=await e.json();if(!e.ok)throw 440===e.status&&o.push("/ui/error/session-expired"),Error(s.error);u(s.room),s.room.available?v("Availability Successfully Edited!"):v("Availability Successfully Edited! Bookings related to this room have been deleted.")}catch(e){b(e.message||"An unexpected error occurred.")}finally{m(!1)}},j=async e=>{m(!0),b(""),v("");try{let e=await (0,l.v$)("/api/hotel-owner/my-hotels/".concat(t,"/").concat(a,"/edit"),{method:"DELETE",credentials:"include"}),s=await e.json();if(!e.ok)throw 440===e.status&&o.push("/ui/error/session-expired"),Error(s.error);u(s.room),w(!0),v("Room has been deleted! Bookings related to this room have been deleted.")}catch(e){b(e.message||"An unexpected error occurred.")}finally{m(!1)}};return x?(0,s.jsx)("div",{className:"flex justify-center items-center h-64 ".concat("dark"===d?"text-white":"text-gray-800"),children:(0,s.jsx)("div",{className:"text-lg font-medium animate-pulse",children:"Loading..."})}):g?(0,s.jsx)("div",{className:"flex justify-center items-center h-64 ".concat("dark"===d?"text-white":"text-gray-800"),children:(0,s.jsxs)("div",{className:"px-6 py-4 rounded-md shadow-md bg-white",children:[(0,s.jsx)("p",{className:"font-semibold text-red-500",children:"Error:"}),(0,s.jsx)("p",{className:"text-red-500",children:g}),(0,s.jsx)("button",{onClick:()=>o.back(),className:"hover:underline cursor-pointer mt-2 text-red-500",children:"Go Back"})]})}):h?(0,s.jsxs)("div",{className:"max-w-5xl mx-auto p-6 rounded-2xl shadow-lg space-y-6 ".concat("dark"===d?"bg-gray-800 text-white":"bg-white text-gray-800"),children:[(0,s.jsx)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-3xl font-bold ".concat("dark"===d?"text-white":"text-black"),children:h.type}),(0,s.jsx)("p",{className:"text-lg font-medium ".concat(h.available?"text-green-500":"text-red-500"),children:h.available?"Available":"Not Available"}),(0,s.jsxs)("p",{className:"text-lg mt-1 ".concat("dark"===d?"text-gray-300":"text-gray-800"),children:[(0,s.jsxs)("span",{className:"font-semibold",children:["$",h.pricePerNight]})," / night"]})]})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-semibold mb-2 ".concat("dark"===d?"text-white":"text-black"),children:"Amenities"}),(0,s.jsx)("ul",{className:"grid grid-cols-1 gap-2 text-sm ".concat("dark"===d?"text-gray-300":"text-gray-800"),children:h.amenities.map((e,t)=>(0,s.jsxs)("li",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{children:"â€¢"})," ",e]},t))})]}),(null===(e=h.images)||void 0===e?void 0:e.length)>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-semibold mb-2 ".concat("dark"===d?"text-white":"text-gray-800"),children:"Photos"}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:h.images.map((e,t)=>(0,s.jsx)(n.default,{src:e,alt:"Room Image ".concat(t+1),width:2880,height:1624,className:"w-full h-full object-cover rounded-lg shadow-sm"},t))})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-3 mt-4",children:[(0,s.jsx)("button",{onClick:y,disabled:f,className:"py-2 px-5 rounded-lg transition ".concat(f?"opacity-50 cursor-not-allowed":"dark"===d?"bg-yellow-600 hover:bg-yellow-700 text-white":"bg-yellow-500 hover:bg-yellow-600 text-white"),children:"Change Availability"}),(0,s.jsx)("button",{onClick:j,disabled:f,className:"py-2 px-5 rounded-lg transition ".concat(f?"opacity-50 cursor-not-allowed":"dark"===d?"bg-red-600 hover:bg-red-700 text-white":"bg-red-500 hover:bg-red-600 text-white"),children:"Delete"}),(0,s.jsx)("button",{onClick:()=>o.back(),className:"py-2 px-5 rounded-lg transition ".concat("dark"===d?"bg-blue-600 hover:bg-blue-700 text-white":"bg-blue-500 hover:bg-blue-600 text-white"),children:"Go Back"})]}),p&&(0,s.jsx)("div",{className:"p-4 rounded-lg ".concat("dark"===d?"bg-green-900/50":"bg-green-100"),children:(0,s.jsx)("p",{className:"text-green-500",children:p})})]}):(0,s.jsx)("div",{className:"flex justify-center items-center h-64 ".concat("dark"===d?"text-white":"text-gray-800"),children:(0,s.jsx)("div",{className:"text-lg font-medium",children:"Room not found"})})}},9147:(e,t,a)=>{Promise.resolve().then(a.bind(a,6061))},9292:(e,t,a)=>{"use strict";a.d(t,{v$:()=>r}),a(8801),a(9980);var s=a(9509);async function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=await fetch(e,{...t,credentials:"include"});if(401===a.status||403===a.status){if(!await i())return new Response(JSON.stringify({message:"Session expired"}),{status:440,headers:{"Content-Type":"application/json"}});a=await fetch(e,{...t,credentials:"include"})}return a}s.env.ACCESS_SECRET,s.env.REFRESH_SECRET,s.env.ACCESS_TOKEN_EXPIRY,s.env.REFRESH_TOKEN_EXPIRY,parseInt(s.env.SALT_ROUNDS,10);async function i(){try{if(!(await fetch("/api/auth/refresh",{method:"POST",credentials:"include"})).ok)return!1;return!0}catch(e){return!1}}},9825:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[9268,3877,6766,8441,1684,7358],()=>t(9147)),_N_E=e.O()}]);